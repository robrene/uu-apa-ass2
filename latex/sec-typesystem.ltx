\section{Type system}
\label{sec:typesystem}

\begin{figure}
  \prototype{Typing}{|Gamma +- e : tau|}

  \axiom[con]{|Gamma +- c : tau|_c}\\ \vspace{0.5\baselineskip}

  \infrule[var]%
    {|Gamma(x) = tau|}%
    {|Gamma +- x : tau|}\\ \vspace{0.5\baselineskip}

  \infrule[fn]%
    {|Gamma[x +-> tau|_x|] +- e_1 : tau|_0}%
    {|Gamma +- fn|_{\pi}| x => e_1 : tau|_x| -> tau |_0}\\ \vspace{0.5\baselineskip}

  \infrule[fun]%
    {|Gamma[f +-> tau|_x| -> tau|_0|][x +-> tau|_x|] +- e_1 : tau|_0}%
    {|Gamma +- fun|_{\pi}| f x => e_1 : tau|_x| -> tau |_0}\\ \vspace{0.5\baselineskip}

  \infrule[app]%
    {|Gamma +- e_1 : tau|_2| -> tau|_0 \qquad%
     |Gamma +- e_2 : tau|_2}%
    {|Gamma +- e_1 e_2 : tau|_0}\\ \vspace{0.5\baselineskip}

  \infrule[if]%
    {|Gamma +- e_1 : bool| \qquad%
     |Gamma +- e_2 : tau| \qquad%
     |Gamma +- e_3 : tau|}%
    {|Gamma +- if e_1 then e_2 else e_3 : tau|}\\ \vspace{0.5\baselineskip}

  \infrule[let]%
    {|Gamma +- e_1 : tau|_1 \qquad%
     |Gamma[x +-> tau|_1|] +- e_2 : tau|_2}%
    {|Gamma +- let x = e_1 in e_2 : tau|_2}\\ \vspace{0.5\baselineskip}

  \infrule[op]%
    {|Gamma +- e_1 : tau|^1_{op} \qquad%
     |Gamma +- e_2 : tau|^2_{op}}%
    {|Gamma +- e_1 op e_2 : tau|_{op}}\\ \vspace{0.5\baselineskip}

  \caption{Typing}
  \label{fig:rf-typing}
\end{figure}


